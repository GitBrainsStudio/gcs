"use strict";(self.webpackChunkgcs=self.webpackChunkgcs||[]).push([[720],{7720:(et,m,o)=>{o.r(m),o.d(m,{PurchaseModule:()=>tt});var r=o(6895),g=o(1570),d=o(4006),h=o(9299),t=o(4650),x=o(161),P=o(9474),Z=o(6451),v=o(5577),_=o(9296),f=o(3580),T=o(8005),A=o(5531),b=o(5938),C=o(4859),S=o(3336),i=o(8255),l=o(3626),D=o(9056);let E=(()=>{class e{constructor(){this.value=_.L.Unknown}}return e.\u0275fac=function(u){return new(u||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-purchase-status"]],inputs:{value:"value"},decls:3,vars:3,template:function(u,a){1&u&&(t.ynx(0),t._uU(1),t.ALo(2,"purchaseStatus"),t.BQk()),2&u&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,a.value),"\n"))},dependencies:[D.L]}),e})();function y(e,n){1&e&&(t.TgZ(0,"th",14),t._uU(1,"\u0417\u0430\u043c\u0435\u0442\u043a\u0430"),t.qZA())}function U(e,n){if(1&e&&(t.TgZ(0,"td",15),t._uU(1),t.qZA()),2&e){const u=n.$implicit;t.xp6(1),t.Oqu(u.Title)}}function N(e,n){1&e&&(t.TgZ(0,"th",14),t._uU(1,"\u0414\u0430\u0442\u0430 \u0437\u0430\u043a\u0443\u043f\u043a\u0438"),t.qZA())}function M(e,n){if(1&e&&(t.TgZ(0,"td",15),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const u=n.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,u.Date,"dd.MM.yyyy")," ")}}function F(e,n){1&e&&(t.TgZ(0,"th",14),t._uU(1,"\u041d\u043e\u043c\u0435\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"),t.qZA())}function Y(e,n){if(1&e&&(t.TgZ(0,"td",15),t._uU(1),t.qZA()),2&e){const u=n.$implicit;t.xp6(1),t.Oqu(u.OrderNumber)}}function B(e,n){1&e&&(t.TgZ(0,"th",14),t._uU(1,"\u0421\u0442\u0430\u0442\u0443\u0441 \u0437\u0430\u043a\u0443\u043f\u043a\u0438"),t.qZA())}function J(e,n){if(1&e&&(t.TgZ(0,"td",15),t._UZ(1,"app-purchase-status",16),t.qZA()),2&e){const u=n.$implicit;t.xp6(1),t.Q6J("value",u.Status)}}function Q(e,n){1&e&&(t.TgZ(0,"th",14),t._uU(1,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0442\u043e\u0432\u0430\u0440\u043e\u0432"),t.qZA())}function w(e,n){if(1&e&&(t.TgZ(0,"td",15),t._uU(1),t.qZA()),2&e){const u=n.$implicit,a=t.oxw(2);t.xp6(1),t.hij(" ",a.getProductsCount(u)," ")}}function R(e,n){1&e&&t._UZ(0,"th",14)}function I(e,n){if(1&e){const u=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(u);const c=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.updatePurchaseStatus(c,s.status.InProgress))}),t._UZ(1,"app-purchase-status",16),t.qZA()}if(2&e){const u=t.oxw(3);t.xp6(1),t.Q6J("value",u.status.InProgress)}}function $(e,n){if(1&e){const u=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(u);const c=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.updatePurchaseStatus(c,s.status.Shipped))}),t._UZ(1,"app-purchase-status",16),t.qZA()}if(2&e){const u=t.oxw(3);t.xp6(1),t.Q6J("value",u.status.Shipped)}}function H(e,n){if(1&e){const u=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(u);const c=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.updatePurchaseStatus(c,s.status.Arrived))}),t._UZ(1,"app-purchase-status",16),t.qZA()}if(2&e){const u=t.oxw(3);t.xp6(1),t.Q6J("value",u.status.Arrived)}}function O(e,n){if(1&e){const u=t.EpF();t.TgZ(0,"td",15)(1,"button",17)(2,"mat-icon"),t._uU(3,"more_vert"),t.qZA()(),t.TgZ(4,"mat-menu",null,18)(6,"button",19),t.NdJ("click",function(){const s=t.CHM(u).$implicit,p=t.oxw(2);return t.KtG(p.openPurchaseEditorDialog(s))}),t._uU(7," \u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435 "),t.qZA(),t.TgZ(8,"button",20),t._uU(9," \u0421\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441 \u043d\u0430 "),t.qZA(),t.TgZ(10,"mat-menu",null,21),t.YNc(12,I,2,1,"button",22),t.YNc(13,$,2,1,"button",22),t.YNc(14,H,2,1,"button",22),t.qZA(),t.TgZ(15,"button",19),t.NdJ("click",function(){const s=t.CHM(u).$implicit,p=t.oxw(2);return t.KtG(p.purchaseDelete(s))}),t._uU(16," \u0423\u0434\u0430\u043b\u0438\u0442\u044c "),t.qZA()()()}if(2&e){const u=n.$implicit,a=t.MAs(5),c=t.MAs(11),s=t.oxw(2);t.xp6(1),t.Q6J("matMenuTriggerFor",a),t.xp6(7),t.Q6J("matMenuTriggerFor",c),t.xp6(4),t.Q6J("ngIf",u.Status!==s.status.InProgress),t.xp6(1),t.Q6J("ngIf",u.Status!==s.status.Shipped),t.xp6(1),t.Q6J("ngIf",u.Status!==s.status.Arrived)}}function k(e,n){1&e&&t._UZ(0,"tr",23)}function G(e,n){1&e&&t._UZ(0,"tr",24)}function K(e,n){if(1&e&&(t.TgZ(0,"table",3),t.ynx(1,4),t.YNc(2,y,2,0,"th",5),t.YNc(3,U,2,1,"td",6),t.BQk(),t.ynx(4,7),t.YNc(5,N,2,0,"th",5),t.YNc(6,M,3,4,"td",6),t.BQk(),t.ynx(7,8),t.YNc(8,F,2,0,"th",5),t.YNc(9,Y,2,1,"td",6),t.BQk(),t.ynx(10,9),t.YNc(11,B,2,0,"th",5),t.YNc(12,J,2,1,"td",6),t.BQk(),t.ynx(13,10),t.YNc(14,Q,2,0,"th",5),t.YNc(15,w,2,1,"td",6),t.BQk(),t.ynx(16,11),t.YNc(17,R,1,0,"th",5),t.YNc(18,O,17,5,"td",6),t.BQk(),t.YNc(19,k,1,0,"tr",12),t.YNc(20,G,1,0,"tr",13),t.qZA()),2&e){const u=t.oxw();t.Q6J("dataSource",u.dataSource),t.xp6(19),t.Q6J("matHeaderRowDef",u.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",u.displayedColumns)}}function j(e,n){1&e&&(t.TgZ(0,"div",25)(1,"div",26),t._uU(2,"\u041f\u043e\u043a\u0430 \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435\u0442 \u{1f609}"),t.qZA(),t.TgZ(3,"div",26),t._uU(4," \u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0441\u0432\u043e\u044e \u043f\u0435\u0440\u0432\u0443\u044e \u0437\u0430\u043a\u0443\u043f\u043a\u0443 \u0447\u0435\u0440\u0435\u0437 \u043a\u043d\u043e\u043f\u043a\u0443 \u0441\u0432\u0435\u0440\u0445\u0443 \u0438\u043b\u0438 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u0441\u044e\u0434\u0430 "),t.qZA()())}let X=(()=>{class e{constructor(u,a,c){this.purchaseService=u,this.purchaseEvents=a,this.matDialog=c,this.displayedColumns=["title","date","orderNumber","status","productsCount","actions"],this.dataSource=[],this.status=_.L}ngOnInit(){this.purchaseService.getAll().subscribe({next:u=>{this.dataSource=u}}),(0,Z.T)(this.purchaseEvents.added,this.purchaseEvents.updated,this.purchaseEvents.deleted).pipe((0,v.z)(()=>this.purchaseService.getAll())).subscribe({next:u=>{this.dataSource=u}})}purchaseDelete(u){this.purchaseService.delete(u)}openPurchaseEditorDialog(u){this.matDialog.open(f.x,{data:u}).afterClosed().subscribe(c=>{c&&this.purchaseService.update(c)})}getProductsCount(u){let a=0;return u.Products.forEach(c=>{a+=c.Count}),a}updatePurchaseStatus(u,a){u.Status=a,this.purchaseService.update(u)}}return e.\u0275fac=function(u){return new(u||e)(t.Y36(T.B),t.Y36(A.S),t.Y36(b.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-purchase-table"]],decls:4,vars:2,consts:[[1,"table-wrapper"],["mat-table","","class","table",3,"dataSource",4,"ngIf","ngIfElse"],["empty",""],["mat-table","",1,"table",3,"dataSource"],["matColumnDef","title"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","date"],["matColumnDef","orderNumber"],["matColumnDef","status"],["matColumnDef","productsCount"],["matColumnDef","actions","stickyEnd",""],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"value"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"matMenuTriggerFor"],["changeStatusMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-header-row",""],["mat-row",""],[1,"table-empty"],[1,"table-empty__row","headline-1"]],template:function(u,a){if(1&u&&(t.TgZ(0,"div",0),t.YNc(1,K,21,3,"table",1),t.YNc(2,j,5,0,"ng-template",null,2,t.W1O),t.qZA()),2&u){const c=t.MAs(3);t.xp6(1),t.Q6J("ngIf",a.dataSource.length>0)("ngIfElse",c)}},dependencies:[r.O5,C.RK,S.Hw,i.VK,i.OP,i.p6,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,E,r.uU]}),e})(),q=(()=>{class e{constructor(u,a){this.dialog=u,this.purchaseService=a}openPurchaseEditorDialog(){this.dialog.open(f.x).afterClosed().subscribe(a=>{a&&this.purchaseService.add(a)})}}return e.\u0275fac=function(u){return new(u||e)(t.Y36(b.uw),t.Y36(T.B))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-purchase-add-button"]],decls:2,vars:0,consts:[["mat-flat-button","",3,"click"]],template:function(u,a){1&u&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return a.openPurchaseEditorDialog()}),t._uU(1," \u041d\u043e\u0432\u0430\u044f \u0437\u0430\u043a\u0443\u043f\u043a\u0430\n"),t.qZA())},dependencies:[C.lW]}),e})();const z=[{path:"",component:(()=>{class e{}return e.\u0275fac=function(u){return new(u||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-purchases"]],decls:4,vars:1,consts:[[3,"title"],["id","action"],["id","content"]],template:function(u,a){1&u&&(t._UZ(0,"app-header"),t.TgZ(1,"app-main",0),t._UZ(2,"app-purchase-add-button",1)(3,"app-purchase-table",2),t.qZA()),2&u&&(t.xp6(1),t.Q6J("title","\u0417\u0430\u043a\u0443\u043f\u043a\u0438"))},dependencies:[x.G,P.C,X,q]}),e})()}];let L=(()=>{class e{}return e.\u0275fac=function(u){return new(u||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[h.Bz.forChild(z),h.Bz]}),e})();var W=o(9721),V=o(8543);let tt=(()=>{class e{}return e.\u0275fac=function(u){return new(u||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[r.ez,L,g.q,d.u5,d.UX,W.x,V.ProductModule]}),e})()}}]);